<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KT Nisang – Katalog</title>
  <style>
    :root{--bg:#0b1020;--fg:#e5e7eb;--muted:#9ca3af;--card:#111827;--line:#1f2a44;--brand:#25D366}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;background:var(--bg);color:var(--fg)}
    .wrap{max-width:1100px;margin:36px auto;padding:0 16px}
    .hero{
      display:grid;grid-template-columns:1.1fr .9fr;gap:20px;
      padding:20px;border:1px solid var(--line);border-radius:14px;
      background:linear-gradient(180deg,#0f172a,#0b1020)
    }
    .hero h1{margin:0 0 8px}
    .hero p{margin:0 0 14px;color:var(--muted)}
    .brand-logos{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
    .brand-logos img{width:140px;height:auto;border-radius:12px;border:1px solid var(--line);background:#0b1020;display:block}
    .hero img.right{width:50%;height:120px;object-fit:cover;border-radius:12px;border:1px solid var(--line);display:block;margin:0 auto}
    @media (max-width:820px){
      .hero{grid-template-columns:1fr}
      .hero img.right{width:60%;height:120px}
      .brand-logos img{width:120px}
    }

    h2{margin:28px 0 12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;height:170px;object-fit:cover;transition:transform .25s ease,box-shadow .25s ease;cursor:pointer}
    .card img:hover{transform:scale(1.08);box-shadow:0 10px 24px rgba(0,0,0,.45);z-index:2;position:relative}
    .p{padding:12px}.title{margin:0 0 6px;font-weight:800}.desc{margin:0 0 10px;color:var(--muted);min-height:34px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:8px}.price{font-weight:800}
    .tag{font-size:12px;background:#1e293b;color:#c7d2fe;padding:4px 8px;border-radius:999px}
    footer{margin:28px 0 10px;color:#93a4b8;text-align:center}

    /* ===== Floating Action Buttons ===== */
    .fab{position:fixed;right:18px;z-index:1000;display:inline-flex;align-items:center;gap:6px;
      padding:12px 14px;border-radius:999px;font-weight:700;text-decoration:none;box-shadow:0 10px 24px rgba(0,0,0,.25);transition:transform .15s ease}
    .fab:hover{transform:translateY(-1px)}
    .fab .ico{width:24px;height:24px;display:grid;place-items:center;border-radius:999px}

    .fab-wa{bottom:18px;background:#25D366;color:#001018}
    .fab-wa img{width:24px;height:24px}
    @media (max-width:420px){.fab-wa{gap:0}.fab-wa span{display:none}}

    .fab-info{bottom:78px;background:#38bdf8;color:#001018;cursor:pointer}
    .fab-info .ico{background:#e0f2fe}
    @media (max-width:420px){.fab-info{gap:0}.fab-info span:not(.ico){display:none}}

    .fab-map{bottom:138px;background:#ea4335;color:#fff}
    .fab-map .ico{background:#fff;color:#ea4335}
    @media (max-width:420px){.fab-map span.label{display:none}}

    .fab-hours{bottom:198px;background:#fbbf24;color:#111827;cursor:pointer}
    .fab-hours.open{background:#16a34a;color:#eafff0}
    .fab-hours.closed{background:#64748b;color:#0b1020}
    .fab-hours .ico{background:#fff}
    @media (max-width:420px){.fab-hours span.label{display:none}}

    .fab-gallery{bottom:258px;background:#a78bfa;color:#0b1020;cursor:pointer}
    .fab-gallery .ico{background:#ede9fe}
    @media (max-width:420px){.fab-gallery span.label{display:none}}

    /* ===== Sheets / Popups ===== */
    .sheet-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:flex-end;justify-content:center;z-index:1100}
    .sheet{width:min(860px,94vw);max-height:86vh;overflow:auto;background:#0b1328;color:var(--fg);border:1px solid var(--line);
      border-radius:16px 16px 0 0;padding:18px 18px 24px;box-shadow:0 -12px 36px rgba(0,0,0,.35);transform:translateY(12px);animation:up .18s ease-out both}
    @keyframes up{from{transform:translateY(20px);opacity:.8}to{transform:translateY(0);opacity:1}}
    .sheet header{display:flex;align-items:center;justify-content:space-between;gap:12px;position:sticky;top:0;background:linear-gradient(180deg,#0b1328 90%,rgba(11,19,40,0));padding-bottom:6px;margin-bottom:8px}
    .sheet h3{margin:0;font-size:20px}
    .close-x{border:1px solid var(--line);background:#0e1731;color:#cbd5e1;width:36px;height:36px;border-radius:10px;display:grid;place-items:center;cursor:pointer}
    .sheet .muted{color:#94a3b8;margin:0 0 10px}
    .sheet h4{margin:18px 0 8px}
    .sheet p{margin:0 0 10px;color:#dbe5f2;line-height:1.6}
    .sheet ul{margin:0 0 12px 18px}.sheet li{margin:6px 0}
    .sheet table{width:100%;border-collapse:collapse;margin-top:8px}
    .sheet th,.sheet td{border:1px solid var(--line);padding:8px;text-align:left}
    .sheet .badge{font-size:12px;background:#1e293b;color:#c7d2fe;padding:4px 8px;border-radius:999px}
    @media (min-width:820px){.sheet{border-radius:16px}.sheet-backdrop{align-items:center}}

    .img-popup{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:1200}
    .img-popup img{max-width:90%;max-height:85vh;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.6)}
    .img-popup .close-img{position:absolute;top:20px;right:20px;background:#0e1731;color:#fff;border:none;font-size:22px;cursor:pointer;width:38px;height:38px;border-radius:50%}

    .hours-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:1100}
    .hours-card{width:min(420px,92vw);background:#0b1328;color:var(--fg);border:1px solid var(--line);border-radius:14px;padding:14px 16px 10px;box-shadow:0 12px 32px rgba(0,0,0,.35);animation:up .18s ease-out both}
    .hours-card header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .hours-card h4{margin:0}
    .close-hours{border:1px solid var(--line);background:#0e1731;color:#cbd5e1;width:32px;height:32px;border-radius:8px;display:grid;place-items:center;cursor:pointer}
    .hours-table{width:100%;border-collapse:collapse}
    .hours-table td{padding:6px 4px;border-bottom:1px dashed var(--line)}
    .hours-table td:first-child{color:#9fb0c9}
    .row-today{background:#0f1a36}
    .status-chip{display:inline-block;border-radius:999px;padding:2px 8px;font-size:12px;margin-left:8px}
    .status-open{background:#16a34a;color:#eafff0}
    .status-closed{background:#ef4444;color:#fff}
    .next-note{color:#9fb0c9;font-size:13px;margin-top:6px}

    .galeri-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:1100}
    .galeri{width:min(960px,96vw);background:#0b1328;color:var(--fg);border:1px solid var(--line);border-radius:16px;padding:14px 16px 18px;box-shadow:0 12px 36px rgba(0,0,0,.45);animation:up .18s ease-out both}
    .galeri header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .close-galeri{border:1px solid var(--line);background:#0e1731;color:#cbd5e1;width:32px;height:32px;border-radius:8px;display:grid;place-items:center;cursor:pointer}
    .track{display:flex;gap:12px;overflow-x:auto;padding-bottom:8px;scroll-snap-type:x mandatory}
    .track img{scroll-snap-align:center;height:min(70vh,520px);width:auto;border-radius:12px;border:1px solid var(--line);flex:0 0 auto;user-select:none}
    .navs{display:flex;justify-content:center;gap:10px;margin-top:10px}
    .navs button{background:#0e1731;color:#fff;border:1px solid var(--line);padding:8px 14px;border-radius:10px;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <div>
        <h1>Katalog KT Nisang</h1>
        <p>Pilihan bekas pelbagai saiz. Sesuai untuk simpanan, hantaran & kegunaan harian.</p>
        <div class="brand-logos">
          <img src="https://i.ibb.co/3YytfpzF/Chat-GPT-Image-Aug-19-2025-05-21-35-PM.png" alt="Logo KT Nisang A">
          <img src="https://i.ibb.co/FkwCQ92S/Screenshot-2025-08-19-173832.png" alt="Logo KT Nisang B">
        </div>
      </div>
      <img class="right" src="https://i.imgur.com/QJ5t2QZ_d.png?maxwidth=520&shape=thumb&fidelity=high" alt="Produk KT Nisang" />
    </section>

    <h2 id="produk">Produk</h2>
    <div class="grid">
      <article class="card">
        <img src="https://i.imgur.com/bG7A1gg.png" alt="Pack (Ikat)">
        <div class="p">
          <div class="row" style="margin-bottom:6px"><h3 class="title">Pack (Ikat)</h3><span class="tag">Pack</span></div>
          <p class="desc">Contoh pembungkusan berikat. (Tiada harga)</p>
          <div class="row"><div class="price">RM —</div><span></span></div>
        </div>
      </article>

      <article class="card">
        <img src="https://i.ibb.co/j9CgLwvJ/Screenshot-2025-08-19-124545-Copy.png" alt="Original (Bekas)">
        <div class="p">
          <div class="row" style="margin-bottom:6px"><h3 class="title">Original (Bekas)</h3><span class="tag">Bekas</span></div>
          <p class="desc">Pilihan dalam bekas plastik kedap.</p>
          <div class="row"><div class="price">RM —</div><span></span></div>
        </div>
      </article>

      <article class="card">
        <img src="https://i.ibb.co/FLsywJ0d/Screenshot-2025-08-19-124537-Copy-2.png" alt="Kecil 6.5cm">
        <div class="p">
          <div class="row" style="margin-bottom:6px"><h3 class="title">Kecil</h3><span class="tag">6.5cm ±</span></div>
          <p class="desc">Saiz kecil untuk kegunaan harian.</p>
          <div class="row"><div class="price">RM —</div><span></span></div>
        </div>
      </article>

      <article class="card">
        <img src="https://i.ibb.co/Hp1wfxXX/Screenshot-2025-08-19-124537-Copy-Copy.png" alt="Besar 9.5cm">
        <div class="p">
          <div class="row" style="margin-bottom:6px"><h3 class="title">Besar</h3><span class="tag">9.5cm ±</span></div>
          <p class="desc">Saiz besar untuk kuantiti lebih.</p>
          <div class="row"><div class="price">RM —</div><span></span></div>
        </div>
      </article>
    </div>

    <footer>© <span id="year"></span> KT Nisang</footer>
  </div>

  <!-- FABs -->
  <a class="fab fab-wa" href="https://wa.link/px4hi1" target="_blank" aria-label="WhatsApp KT Nisang">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt=""><span>WhatsApp</span>
  </a>

  <button class="fab fab-info" id="openInfo" type="button" aria-haspopup="dialog" aria-controls="sheetArtikel" aria-expanded="false">
    <span class="ico">i</span><span>Info Gula Nisang</span>
  </button>

  <a class="fab fab-map" href="https://maps.app.goo.gl/NMCTictdkkkZxZmH7" target="_blank" rel="noopener" aria-label="Lokasi KT Nisang di Google Maps">
    <span class="ico">📍</span><span class="label">Lokasi</span>
  </a>

  <button class="fab fab-hours" id="openHours" type="button" aria-haspopup="dialog" aria-controls="hoursCard" aria-expanded="false">
    <span class="ico">🕒</span><span class="label" id="hoursFabLabel">Waktu Operasi</span>
  </button>

  <button class="fab fab-gallery" id="openGaleri" type="button" aria-haspopup="dialog" aria-controls="galeriPanel" aria-expanded="false">
    <span class="ico">🖼️</span><span class="label">Gambar</span>
  </button>

  <!-- SHEET ARTIKEL -->
  <div class="sheet-backdrop" id="sheetBackdrop" role="dialog" aria-modal="true" aria-labelledby="sheetTitle" style="display:none">
    <div class="sheet" id="sheetArtikel">
      <header>
        <h3 id="sheetTitle">Tentang Gula Nisang</h3>
        <button class="close-x" id="closeSheet" type="button" aria-label="Tutup">✕</button>
      </header>
      <p class="muted">Ringkasan warisan & info produk.</p>
      <h4>Asal Usul & Proses</h4>
      <p>Gula nisang ialah gula nisan asli yang dihasilkan daripada <strong>air nira mayang kelapa</strong>…</p>
      <h4>Penyimpanan & Pengawet Semula Jadi</h4>
      <ul><li><strong>Simpan beku</strong> …</li><li><strong>Kayu cengal</strong> …</li></ul>
      <h4>Fermentasi → Cuka</h4>
      <p>Jika dibiarkan lama pada suhu bilik …</p>
      <h4>Ciri Rasa</h4>
      <ul><li>Manis karamel pekat</li><li>Tekstur keras</li><li>Bentuk bulat</li></ul>
    </div>
  </div>

  <!-- PANEL WAKTU OPERASI -->
  <div class="hours-backdrop" id="hoursBackdrop" role="dialog" aria-modal="true" aria-labelledby="hoursTitle" style="display:none">
    <div class="hours-card" id="hoursCard">
      <header>
        <h4 id="hoursTitle">Waktu Operasi
          <span id="openStatusChip" class="status-chip status-open">Buka sekarang</span>
        </h4>
        <button class="close-hours" id="closeHours" type="button" aria-label="Tutup">✕</button>
      </header>
      <table class="hours-table" aria-describedby="hoursTitle">
        <tr data-day="1"><td>Isnin (Monday)</td><td>9:00 pagi – 9:00 malam</td></tr>
        <tr data-day="2"><td>Selasa (Tuesday)</td><td>9:00 pagi – 9:00 malam</td></tr>
        <tr data-day="3"><td>Rabu (Wednesday)</td><td>9:00 pagi – 9:00 malam</td></tr>
        <tr data-day="4"><td>Khamis (Thursday)</td><td>9:00 pagi – 9:00 malam</td></tr>
        <tr data-day="5"><td>Jumaat (Friday)</td><td>9:00 pagi – 9:00 malam</td></tr>
        <tr data-day="6"><td>Sabtu (Saturday)</td><td>9:30 pagi – 5:00 petang</td></tr>
        <tr data-day="0"><td>Ahad (Sunday)</td><td>Tutup</td></tr>
      </table>
      <p id="nextNote" class="next-note"></p>
    </div>
  </div>

  <!-- PANEL GALERI -->
  <div class="galeri-backdrop" id="galeriBackdrop" role="dialog" aria-modal="true" aria-labelledby="galeriTitle" style="display:none">
    <div class="galeri" id="galeriPanel">
      <header>
        <h4 id="galeriTitle">Gambar</h4>
        <button class="close-galeri" id="closeGaleri" type="button" aria-label="Tutup">✕</button>
      </header>
      <div class="track" id="track">
        <img src="https://i.ibb.co/1ffksPXx/Screenshot-2025-08-19-173811.png" alt="Gambar 1">
        <img src="https://i.ibb.co/rK5Rn8GG/Screenshot-2025-08-19-173757.png" alt="Gambar 2">
        <img src="https://i.ibb.co/NnNrPWDS/Screenshot-2025-08-19-173750.png" alt="Gambar 3">
      </div>
      <div class="navs">
        <button id="prevBtn" type="button" aria-label="Sebelum">← Prev</button>
        <button id="nextBtn" type="button" aria-label="Seterusnya">Next →</button>
      </div>
    </div>
  </div>

  <!-- POPUP GAMBAR PRODUK (klik kad) -->
  <div class="img-popup" id="imgPopup">
    <button class="close-img" id="closeImg" type="button">✕</button>
    <img src="" alt="Popup Produk" id="popupImg">
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // util
      const $ = s => document.querySelector(s);
      const $$ = s => document.querySelectorAll(s);

      // Tahun
      const y = $('#year'); if (y) y.textContent = new Date().getFullYear();

      /* ====== Sheet Info ====== */
      const openInfo = $('#openInfo'), sheetBd = $('#sheetBackdrop'), closeSheet = $('#closeSheet');
      function openSheet(){ if(!sheetBd||!openInfo) return; sheetBd.style.display='flex'; openInfo.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
      function hideSheet(){ if(!sheetBd||!openInfo) return; sheetBd.style.display='none'; openInfo.setAttribute('aria-expanded','false'); document.body.style.overflow=''; }
      if (openInfo) openInfo.addEventListener('click', openSheet);
      if (closeSheet) closeSheet.addEventListener('click', hideSheet);
      if (sheetBd) sheetBd.addEventListener('click', e=>{ if(e.target===sheetBd) hideSheet(); });

      /* ====== Popup gambar produk (klik kad) ====== */
      const popup = $('#imgPopup'), popupImg = $('#popupImg'), closeImg = $('#closeImg');
      if (popup && popupImg && closeImg) {
        $$('.card img').forEach(img=>{
          img.addEventListener('click', ()=>{ popup.style.display='flex'; popupImg.src=img.src; });
        });
        closeImg.addEventListener('click', ()=> popup.style.display='none');
        popup.addEventListener('click', e=>{ if(e.target===popup) popup.style.display='none'; });
      }

      /* ====== Waktu Operasi ====== */
      const openHoursBtn = $('#openHours'), hoursBd = $('#hoursBackdrop'), closeHoursBtn = $('#closeHours');
      const openStatusChip = $('#openStatusChip'), nextNote = $('#nextNote'), hoursFabLabel = $('#hoursFabLabel');

      const SCHEDULE = {0:null,1:[540,1260],2:[540,1260],3:[540,1260],4:[540,1260],5:[540,1260],6:[570,1020]};
      const minutesNow = ()=>{ const d=new Date(); return d.getHours()*60 + d.getMinutes(); };
      const formatTime = (mins)=>{ let h=Math.floor(mins/60), m=mins%60; const label=h<12?'pagi':(h<18?'petang':'malam'); if(h===0)h=12;else if(h>12)h-=12; return `${h}:${m.toString().padStart(2,'0')} ${label}`; };

      function nextOpenMessage(){
        const now = new Date(); const day = now.getDay(); const t = minutesNow();
        for (let i=0;i<7;i++){
          const d=(day+i)%7, slot=SCHEDULE[d]; if(!slot) continue;
          if(i===0){ if(t<=slot[0]) return `Buka hari ini pada ${formatTime(slot[0])}.`; if(t>=slot[1]) continue; }
          const when=(i===1)?'esok':['Ahad','Isnin','Selasa','Rabu','Khamis','Jumaat','Sabtu'][d];
          return `Buka ${when} pada ${formatTime(slot[0])}.`;
        } return '';
      }

      function computeStatus(){
        const now=new Date(), day=now.getDay(), t=minutesNow(), today=SCHEDULE[day];
        $$('.hours-table tr').forEach(tr=> tr.classList.toggle('row-today', Number(tr.dataset.day)===day));
        if(today && t>=today[0] && t<today[1]){
          if(openStatusChip){openStatusChip.textContent='Buka sekarang';openStatusChip.className='status-chip status-open';}
          if(openHoursBtn){openHoursBtn.classList.add('open');openHoursBtn.classList.remove('closed');}
          if(hoursFabLabel) hoursFabLabel.textContent='Buka sekarang';
          if(nextNote) nextNote.textContent=`Tutup pada ${formatTime(today[1])}.`;
        } else {
          if(openStatusChip){openStatusChip.textContent='Tutup sekarang';openStatusChip.className='status-chip status-closed';}
          if(openHoursBtn){openHoursBtn.classList.add('closed');openHoursBtn.classList.remove('open');}
          if(hoursFabLabel) hoursFabLabel.textContent='Tutup sekarang';
          if(nextNote) nextNote.textContent=nextOpenMessage();
        }
      }

      function showHours(){ if(!hoursBd||!openHoursBtn) return; computeStatus(); hoursBd.style.display='flex'; openHoursBtn.setAttribute('aria-expanded','true'); }
      function hideHours(){ if(!hoursBd||!openHoursBtn) return; hoursBd.style.display='none'; openHoursBtn.setAttribute('aria-expanded','false'); }

      if (openHoursBtn) openHoursBtn.addEventListener('click', showHours);
      if (closeHoursBtn) closeHoursBtn.addEventListener('click', hideHours);
      if (hoursBd) hoursBd.addEventListener('click', e=>{ if(e.target===hoursBd) hideHours(); });
      computeStatus(); setInterval(computeStatus, 60000);

      /* ====== Galeri ====== */
      const openGaleriBtn = $('#openGaleri'), galeriBd = $('#galeriBackdrop'), closeGaleriBtn = $('#closeGaleri'), track = $('#track');
      const prevBtn = $('#prevBtn'), nextBtn = $('#nextBtn');

      function openGaleri(){ if(!galeriBd||!openGaleriBtn) return; galeriBd.style.display='flex'; openGaleriBtn.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
      function closeGaleri(){ if(!galeriBd||!openGaleriBtn) return; galeriBd.style.display='none'; openGaleriBtn.setAttribute('aria-expanded','false'); document.body.style.overflow=''; }

      if (openGaleriBtn) openGaleriBtn.addEventListener('click', openGaleri);
      if (closeGaleriBtn) closeGaleriBtn.addEventListener('click', closeGaleri);
      if (galeriBd) galeriBd.addEventListener('click', e=>{ if(e.target===galeriBd) closeGaleri(); });

      function scrollByCard(dir){
        if(!track) return;
        const first = track.querySelector('img'); if(!first) return;
        const w = first.getBoundingClientRect().width + 12; // 12 = gap
        track.scrollBy({ left: dir*w, behavior:'smooth' });
      }
      if (prevBtn) prevBtn.addEventListener('click', ()=>scrollByCard(-1));
      if (nextBtn) nextBtn.addEventListener('click', ()=>scrollByCard(1));
    });
  </script>
</body>
</html>
